COMPILE;
DIRECTORY MASTER;
/****************************************************************************
srcdata.hdl
10/10/88

Source Data Register

This register holds the data read during the source data read cycle of the 
inner loop.  Provision is made to swap the low and high nybbles of the
low byte in hires mode if necessary.

When the source data register is loaded with pattern data it is necessary to
load the high byte of the register from the low byte of the data bus.  This
is given by the signal srcltoh.

****************************************************************************/


MODULE SRCDATA;

INPUTS	ID_0,ID_1,ID_2,ID_3,ID_4,ID_5,ID_6,ID_7,ID_8,ID_9,ID_10,ID_11,ID_12,
   ID_13,ID_14,ID_15,LDSRCL,SRCLTOH,SSWAP;
OUTPUTS	SRCD_0,SRCD_1,SRCD_2,SRCD_3,SRCD_4,SRCD_5,SRCD_6,SRCD_7,SRCD_8,SRCD_9,
   SRCD_10,SRCD_11,SRCD_12,SRCD_13,SRCD_14,SRCD_15;
LEVEL FUNCTION;
DEFINE

/* Multiplex the low and high bytes of the data bus */

SRCLTOHL_(SRCLTOHL) = N1B(SRCLTOH);
SDI_8_(SDI_8) = AO2A(SRCLTOH,ID_0,SRCLTOHL,ID_8);
SDI_9_(SDI_9) = AO2A(SRCLTOH,ID_1,SRCLTOHL,ID_9);
SDI_10_(SDI_10) = AO2A(SRCLTOH,ID_2,SRCLTOHL,ID_10);
SDI_11_(SDI_11) = AO2A(SRCLTOH,ID_3,SRCLTOHL,ID_11);
SDI_12_(SDI_12) = AO2A(SRCLTOH,ID_4,SRCLTOHL,ID_12);
SDI_13_(SDI_13) = AO2A(SRCLTOH,ID_5,SRCLTOHL,ID_13);
SDI_14_(SDI_14) = AO2A(SRCLTOH,ID_6,SRCLTOHL,ID_14);
SDI_15_(SDI_15) = AO2A(SRCLTOH,ID_7,SRCLTOHL,ID_15);

/* The source data latch */

SRCDL_0_(SDINT_0,SDINTL_0) = LD2A(ID_0,LDSRCL);
SRCDL_1_(SDINT_1,SDINTL_1) = LD2A(ID_1,LDSRCL);
SRCDL_2_(SDINT_2,SDINTL_2) = LD2A(ID_2,LDSRCL);
SRCDL_3_(SDINT_3,SDINTL_3) = LD2A(ID_3,LDSRCL);
SRCDL_4_(SDINT_4,SDINTL_4) = LD2A(ID_4,LDSRCL);
SRCDL_5_(SDINT_5,SDINTL_5) = LD2A(ID_5,LDSRCL);
SRCDL_6_(SDINT_6,SDINTL_6) = LD2A(ID_6,LDSRCL);
SRCDL_7_(SDINT_7,SDINTL_7) = LD2A(ID_7,LDSRCL);
SRCDL_8_(SRCDL_8,SRCD_8) = LD2A(SDI_8,LDSRCL);
SRCDL_9_(SRCDL_9,SRCD_9) = LD2A(SDI_9,LDSRCL);
SRCDL_10_(SRCDL_10,SRCD_10) = LD2A(SDI_10,LDSRCL);
SRCDL_11_(SRCDL_11,SRCD_11) = LD2A(SDI_11,LDSRCL);
SRCDL_12_(SRCDL_12,SRCD_12) = LD2A(SDI_12,LDSRCL);
SRCDL_13_(SRCDL_13,SRCD_13) = LD2A(SDI_13,LDSRCL);
SRCDL_14_(SRCDL_14,SRCD_14) = LD2A(SDI_14,LDSRCL);
SRCDL_15_(SRCDL_15,SRCD_15) = LD2A(SDI_15,LDSRCL);

/* The 4-bit pixel nybble swapper */

SSWPINV_(SSWAPL) = N1C(SSWAP);
SRCMUX_0_(SRCD_0) = AO2B(SSWAP,SDINTL_4,SSWAPL,SDINTL_0);
SRCMUX_1_(SRCD_1) = AO2B(SSWAP,SDINTL_5,SSWAPL,SDINTL_1);
SRCMUX_2_(SRCD_2) = AO2B(SSWAP,SDINTL_6,SSWAPL,SDINTL_2);
SRCMUX_3_(SRCD_3) = AO2B(SSWAP,SDINTL_7,SSWAPL,SDINTL_3);
SRCMUX_4_(SRCD_4) = AO2B(SSWAP,SDINTL_0,SSWAPL,SDINTL_4);
SRCMUX_5_(SRCD_5) = AO2B(SSWAP,SDINTL_1,SSWAPL,SDINTL_5);
SRCMUX_6_(SRCD_6) = AO2B(SSWAP,SDINTL_2,SSWAPL,SDINTL_6);
SRCMUX_7_(SRCD_7) = AO2B(SSWAP,SDINTL_3,SSWAPL,SDINTL_7);

END MODULE;
END COMPILE;
END;
